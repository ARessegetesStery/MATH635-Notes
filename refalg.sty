\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{refalg}[2023/08/26 Algebra Notes Common Header]

\RequirePackage{booktabs}
\RequirePackage{geometry}
\RequirePackage{enumerate}
\RequirePackage{setspace}
\RequirePackage{amsthm}
\RequirePackage{amsmath,amssymb}
\RequirePackage{amstext}
\RequirePackage{graphicx}
\RequirePackage{nicematrix}
\RequirePackage{wrapfig}
\RequirePackage{stmaryrd}
\RequirePackage{mathrsfs}
\RequirePackage{fancyhdr}
\RequirePackage{booktabs}
\RequirePackage{bm}
\RequirePackage[ruled,linesnumbered]{algorithm2e}
\RequirePackage{centernot}
\RequirePackage{titlesec}
\RequirePackage{libertinus}
\RequirePackage{tikz-cd}
\RequirePackage{xspace}
\RequirePackage{enumitem}
\RequirePackage[new]{old-arrows}

\RequirePackage{thmtools}

\definecolor{darkblue}{rgb}{.2,.2,.55} 
\definecolor{lightgreen}{rgb}{.01,.64,.73}
\definecolor{lightblue}{rgb}{.18,.53,.87}
\definecolor{lightpurple}{rgb}{.45,.30,.70}
\RequirePackage[colorlinks,linkcolor=lightgreen,urlcolor=lightblue]{hyperref}

% \geometry{a4paper,left=0.5in,right=0.5in,top=1in,bottom=1in}
% \linespread{1.4}

% Common Math Notations
\def\enc{\mathrm{enc}}
\def\gcd{\mathrm{gcd}}
\def\Pr{\mathrm{Pr}}
\def\F{\mathbb{F}}
\def\N{\mathbb{N}}
\def\R{\mathbb{R}}
\def\C{\mathbb{C}}
\def\Z{\mathbb{Z}}
\def\Q{\mathbb{Q}}
\def\pair#1{\left\langle #1 \right\rangle}
\def\inner#1{\pair{#1}}
\def\mod#1{\ (\text{mod}\ #1)}
\def\lcm{\mathrm{lcm}}
\def\abs#1{\left|#1\right|}
\def\norm#1{\left\|#1\right\|}
\def\JacSymb#1#2{\left(\frac{#1}{#2}\right)}
\def\nequiv{\centernot\equiv}
\def\im{\mathrm{im}\ }
\def\Id{\mathrm{Id}}
\def\Rees{\mathrm{Rees}}
\def\bigmid{\ \Big|\ }
\def\rank{\mathrm{rank}}
\def\Supp{\mathrm{Supp}}
\def\Frac{\mathrm{Frac}}
\def\Ann{\mathrm{Ann}}
\def\Hom{\mathrm{Hom}}
\def\End{\mathrm{End}}
\def\Aut{\mathrm{Aut}}

% Categorical Notations
\def\cat#1{\underline{\textup{#1}}}
\def\coker{\mathrm{coker}\ }
\def\catsets{\cat{Sets}}
\def\catrings{\cat{Rings}}
\def\catfields{\cat{Fields}}
\def\catab{\cat{Ab}}
\def\catlmod#1{{}_{#1}\cat{Mod}}
\def\catrmod#1{\cat{Mod}_{#1}}
\def\cattop{\cat{Tops}}
\def\Ob{\mathrm{Ob}}
\def\dual#1{#1^{\ast}}
\def\too{\longrightarrow}
\def\tooh#1{\overset{#1}{\longrightarrow}}

\def\catc{\mathscr{C}}
\def\catd{\mathscr{D}}

\def\tensor{\otimes}

% Notations for Differential Geometry
\def\linspan{\mathrm{span}}
\def\RP{\mathbb{RP}}
\def\CP{\mathbb{CP}}
\def\Diffeo{\mathrm{Diffeo}}
\def\Homeo{\mathrm{Homeo}}
\def\Diff{\mathrm{Diff}}
\def\GL{\mathrm{GL}}
\def\SL{\mathrm{SL}}
\def\SO{\mathrm{SO}}
\def\O{\mathrm{O}}

\def\closure#1{\overline{#1}}
\def\restr#1#2{\left.#1\right|_{#2}}
\newcommand{\smooth}[0]{\ensuremath{C^{\infty}}}

\def\ppd#1{\frac{\partial}{\partial #1}}
\def\pp#1#2{\frac{\partial #1}{\partial #2}}
\def\dd#1#2{\frac{\mathrm{d} #1}{\mathrm{d} #2}}
\def\d{\mathrm{d}}

\def\iso{\overset{\sim}{\longrightarrow}}

\renewcommand{\implies}{\ \ensuremath{\Longrightarrow}\ }

\theoremstyle{definition}

\definecolor{darkblue}{HTML}{0077b6}
\definecolor{darkgray}{RGB}{50,50,50}
\definecolor{darkpurple}{HTML}{5e60ce}
\definecolor{darkgreen}{HTML}{588157}
\definecolor{darkbrown}{HTML}{7f4f24}
\definecolor{deepblue}{HTML}{0652DD}

\def\thmstyle#1#2
{
  \declaretheoremstyle[
    headfont=\bfseries\sffamily\color{#1!70!black!85}, bodyfont=\normalfont,
    spaceabove=1em,
    mdframed={
            linewidth=2pt,
            rightline=false, topline=false, bottomline=false,
            linecolor=#1!70!black!50, backgroundcolor=#1!4.5,
            nobreak=false
        }
]{#2}
}

\thmstyle{darkblue}{thmbox}
\thmstyle{deepblue}{notationbox}
\thmstyle{darkgray}{rmkbox}
\thmstyle{darkpurple}{propbox}
\thmstyle{darkgreen}{lemmabox}
\thmstyle{darkbrown}{examplebox}

\declaretheorem[style=thmbox, name=Definition, numberwithin=section]{definition}
\declaretheorem[style=thmbox, name=Definition, numbered=no]{definition*}
\declaretheorem[style=thmbox, name=Theorem, numberwithin=section, sibling=definition]{theorem}
\declaretheorem[style=thmbox, name=Theorem, numbered=no]{theorem*}
\declaretheorem[style=lemmabox, name=Lemma, numberwithin=section, sibling=definition]{lemma}
\declaretheorem[style=lemmabox, name=Claim, numberwithin=section, sibling=definition]{claim}
\declaretheorem[style=lemmabox, name=Parenthesis, numberwithin=section, sibling=definition]{parenthesis}
\declaretheorem[style=examplebox, name=Example, numberwithin=section, sibling=definition]{example}
\declaretheorem[style=rmkbox, name=Observation, numberwithin=section, sibling=definition]{observation}
\declaretheorem[style=rmkbox, name=Remark, numberwithin=section, sibling=definition]{remark}
\declaretheorem[style=notationbox, name=Notation, numbered=no]{notation}
\declaretheorem[style=propbox, name=Proposition, numberwithin=section, sibling=definition]{proposition}
\declaretheorem[style=examplebox, name=Corollary, numberwithin=section, sibling=definition]{corollary}
\declaretheorem[style=thmbox, name=Problem, numberwithin=section, sibling=definition]{problem}
\declaretheorem[style=thmbox, name=Problem, numbered=no, sibling=definition]{problem*}

\def\textstart{\vspace*{-1em}}

\renewcommand\section{\@startsection {section}{1}{\z@}%
                                   {-5.5ex \@plus -1ex \@minus -.2ex}%
                                   {2.5ex \@plus.2ex}%
                                   {\normalfont\Large\bfseries}}
\renewcommand\subsection{\@startsection {subsection}{1}{\z@}%
                                   {-1.5ex \@plus -1ex \@minus -.2ex}%
                                   {2ex \@plus.2ex}%
                                   {\normalfont\large\bfseries}}

\geometry{a4paper,left=0.5in,right=0.5in,top=1in,bottom=1in}
\linespread{1.4}

\titlespacing{\section}{0pt}{0pt}{0pt}
\titlespacing{\subsection}{0pt}{0pt}{0pt}

\setlist[itemize]{topsep=0pt}
\setlist[enumerate]{topsep=0pt}

% Customize symbol in tikzcd 
\tikzset{
  symbol/.style={
    draw=none,
    every to/.append style={
      edge node={node [sloped, allow upside down, auto=false]{$#1$}}}
  }
}

\renewcommand{\sectionmark}[1]{\markboth{#1}{}}

% #1 General Title
% #2 Subtitle
% #3 Name
\def\Makepagetitlehead#1#2#3{
    \title{\vspace{-1.5cm} #1\ #2}
    \author{#3}
    \date{\today}\maketitle
    \pagestyle{fancy}
    \setlength{\parskip}{1em}
    \setlength{\parindent}{0em}
    \lhead{#2}
    \chead{#1}
    % \chead{\leftmark}
    \rhead{#3}
}

\def\Makepagesectionhead#1#2#3{
    \title{\vspace{-1.5cm} #1 - #2}
    \author{#3}
    \date{\today}\maketitle
    \pagestyle{fancy}
    \setlength{\parskip}{1em}
    \setlength{\parindent}{0em}
    \lhead{#2}
    \chead{\leftmark}
    \rhead{#3}
}

\pagestyle{fancy}